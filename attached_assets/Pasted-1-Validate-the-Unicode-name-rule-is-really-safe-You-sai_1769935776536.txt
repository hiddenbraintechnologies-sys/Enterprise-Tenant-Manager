1) Validate the Unicode name rule is really safe

You said â€œinternational Unicode supportâ€ in shared/validation/name.ts. Thatâ€™s good, but only if itâ€™s implemented with Unicode property escapes and youâ€™ve prevented weird edge cases.

A solid Unicode-friendly pattern is usually:

allow letters from any language: \p{L}

allow combining marks: \p{M} (for accents)

allow separators: space, hyphen, apostrophe

must start with a letter

must contain at least one letter (prevents â€œ---â€ or â€œ â€™ â€™ â€)

Example (works in modern Node with the u flag):

export const NAME_REGEX = /^\p{L}[\p{L}\p{M}\s'-]{1,49}$/u;


Quick edge cases to test:

âœ… JosÃ©, RenÃ©e, Åukasz, Ù…Ø­Ù…Ø¯, å¼ ä¼Ÿ, à®…à®°à¯à®£à¯

âœ… O'Connor, Jean-Paul, Mary Ann

âŒ !@#$, 1234, ---, ' ', ğŸ™‚

âŒ Leading space: " John" (should be trimmed first)

âŒ Double separators: "John--Paul" (optional: allow or reject)

âŒ Multiple spaces: "Mary Ann" (optional: normalize)

If you want to be strict: normalize spaces/hyphens before validation.

2) Confirm backend trims and normalizes before saving

Even with trim(), you should ensure you store a clean version:

Collapse multiple spaces: Mary Ann â†’ Mary Ann

Remove leading/trailing separators: -John or John- reject

Optionally normalize Unicode: NFC (prevents weird duplicates)

Suggested normalization function:

export function normalizeName(input: string) {
  return input
    .normalize("NFC")
    .trim()
    .replace(/\s+/g, " ");
}


Use it before DB insert (backend), and optionally in frontend too.

3) Ensure the API error shape is consistent everywhere

Your response includes both:

fieldErrors[]

and message

Thatâ€™s fine, but make sure the rule is consistent:

If fieldErrors exists â†’ show field messages

message is only a fallback (toast / root error)

Make sure message isnâ€™t contradictory (e.g., message says â€œInvalid emailâ€ but fieldErrors says name).

4) React Hook Form mapping: handle root + nested fields safely

In client/src/lib/form-errors.ts, ensure:

Unknown fields map to root

Supports nested fields if you ever add them (company.address.line1)

Suggested behavior:

If field doesnâ€™t exist in form: setError("root", ...)

Also: dedupe repeated errors.

5) Add tests (these are the minimum that catch regressions)
Backend tests (Jest)

firstName="!@#$%" â†’ 400 with fieldErrors[0].field === "firstName"

Unicode valid name passes: firstName="JosÃ©" â†’ 201

firstName="å¼ ä¼Ÿ" passes

firstName="---" fails

Frontend (optional)

Submit invalid name â†’ inline error shows without toast

Submit valid â†’ proceeds

6) Quick UX improvement (tiny but important)

Instead of showing the full long message in the toast, keep toast short:

Toast: â€œPlease fix the highlighted fieldsâ€

Field message stays detailed

This prevents noisy error popups.

If you want one final â€œQA confirmation scriptâ€

Use this checklist:

Try !@#$ in first name â†’ blocked UI + 400 from API

Try å¼ ä¼Ÿ â†’ accepted

Try Jean-Paul â†’ accepted

Try O'Connor â†’ accepted

Try " Mary Ann " â†’ saved as Mary Ann (if normalization added)

Confirm DB contains normalized string

If you paste your current shared/validation/name.ts content (just that file), Iâ€™ll sanity-check the Unicode regex and suggest any small tweaks to avoid false positives/negatives.